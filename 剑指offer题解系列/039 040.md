
# 039 直方图最大矩阵面积

## 题目

给定非负整数数组 `heights` ，数组中的数字用来表示柱状图中各个柱子的高度。每个柱子彼此相邻，且宽度为 `1` 。求在该柱状图中，能够勾勒出来的矩形的最大面积。

![[Pasted image 20221225203813.png]]

输入：**heights = [2,1,5,6,2,3]
输出** 10
**解释：最大的矩形为图中红色区域，面积为 10

## 思路

重点：如何得到横坐标的大小？

![[Pasted image 20221225204914.png]]

对于任意一个位置，想要找到以该位置为高，可以向左向右找到的可以扩张的最大宽度。

如图中，当index=2，height=h[2]=4,往左找到第一个低于h[2]的位置，left=0.向右找到第一个低于height[2]的位置，right=4，所以right-left-1=3

所以以h[2] 为高的最大矩阵的面积是height*width=12

![[Pasted image 20221225205245.png]]

利用单调栈，栈中保存的值对应的高逐渐增加。
当想要index放入栈时候，判断，h[statck.peek] 是否高于h[index] 如果高于，则表示我们找到以height=h[stack.peek]为高的矩阵的右侧位置，right=index，此时进行stack.pop()之后，stack。peek() 即为left，因为栈是单调递增的，stack.peek 即为左侧第一个低于height的位置，left=stack.peek()














